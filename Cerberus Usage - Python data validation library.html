<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Cerberus Usage &mdash; Python data validation library</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnmedia.readthedocs.org/css/badge_only.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnmedia.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/underscore.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/doctools.js"></script>
    <script type="text/javascript" src="https://cdnmedia.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
    <link rel="top" title="Python data validation library" href="index.html" />
    <link rel="next" title="Extending Cerberus" href="customize.html" />
    <link rel="prev" title="Cerberus Installation" href="install.html" />

   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

<!-- RTD Extra Head -->



  
  <!-- 
  Always link to the latest version, as canonical.
  http://docs.readthedocs.org/en/latest/canonical.html
  -->
  <link rel="canonical" href="http://docs.python-cerberus.org//en/latest/usage.html" />
  

<script type="text/javascript">
  // This is included here because other places don't have access to the pagename variable.
  var READTHEDOCS_DATA = {
    project: "cerberus",
    version: "latest",
    language: "en",
    page: "usage",
    builder: "sphinx",
    theme: "alabaster",
    docroot: "/docs/",
    source_suffix: ".rst",
    api_host: "https://readthedocs.org/",
    commit: "839865f0dc06f3ac34041e75bb61e6eef93e8eed"
  }
  // Old variables
  var doc_version = "latest";
  var doc_slug = "cerberus";
  var page_name = "usage";
  var html_theme = "alabaster";
</script>
<!-- RTD Analytics Code -->
<!-- Included in the header because you don't have a footer block. -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);


  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- end RTD Analytics Code -->
<!-- end RTD <extrahead> -->

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cerberus-usage">
<span id="usage"></span><h1>Cerberus Usage<a class="headerlink" href="#cerberus-usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>You define a validation schema and pass it to an instance of the
<a class="reference internal" href="api.html#cerberus.Validator" title="cerberus.Validator"><code class="xref py py-class docutils literal"><span class="pre">Validator</span></code></a> class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
</pre></div>
</div>
<p>Then you simply invoke the <a class="reference internal" href="api.html#cerberus.Validator.validate" title="cerberus.Validator.validate"><code class="xref py py-func docutils literal"><span class="pre">validate()</span></code></a> to validate
a dictionary against the schema. If validation succeeds, <code class="docutils literal"><span class="pre">True</span></code> is returned:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;john doe&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Alternatively, you can pass both the dictionary and the schema to the
<a class="reference internal" href="api.html#cerberus.Validator.validate" title="cerberus.Validator.validate"><code class="xref py py-func docutils literal"><span class="pre">validate()</span></code></a> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Which can be handy if your schema is changing through the life of the
instance.</p>
<p>Unlike other validation tools, Cerberus will not halt and raise an exception on
the first validation issue. The whole document will always be processed, and
<code class="docutils literal"><span class="pre">False</span></code> will be returned if validation failed.  You can then access the
<a class="reference internal" href="api.html#cerberus.Validator.errors" title="cerberus.Validator.errors"><code class="xref py py-func docutils literal"><span class="pre">errors()</span></code></a> method to obtain a list of issues.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">},</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">,</span> <span class="s">&#39;min&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="mi">1337</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;age&#39;: &#39;min value is 10&#39;, &#39;name&#39;: &#39;must be of string type&#39;}</span>
</pre></div>
</div>
<p>You will still get <a class="reference internal" href="api.html#cerberus.SchemaError" title="cerberus.SchemaError"><code class="xref py py-class docutils literal"><span class="pre">SchemaError</span></code></a> and
<a class="reference internal" href="api.html#cerberus.ValidationError" title="cerberus.ValidationError"><code class="xref py py-class docutils literal"><span class="pre">ValidationError</span></code></a> exceptions.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.4.1: </span>The Validator class is callable, allowing for the following shorthand
syntax:</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;john doe&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="validation-schema">
<h2>Validation Schema<a class="headerlink" href="#validation-schema" title="Permalink to this headline">¶</a></h2>
<p>A validation schema is a dictionary. Schema keys are the keys allowed in
the target dictionary. Schema values express the rules that must be  matched by
the corresponding target values.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;maxlength&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}}</span>
</pre></div>
</div>
<p>In the example above we define a target dictionary with only one key, <code class="docutils literal"><span class="pre">name</span></code>,
which is expected to be a string not longer than 10 characters. Something like
<code class="docutils literal"><span class="pre">{'name':</span> <span class="pre">'john</span> <span class="pre">doe'}</span></code> would validate, while something like <code class="docutils literal"><span class="pre">{'name':</span> <span class="pre">'a</span>
<span class="pre">very</span> <span class="pre">long</span> <span class="pre">string'}</span></code> or <code class="docutils literal"><span class="pre">{'name':</span> <span class="pre">99}</span></code> would not.</p>
<p>By definition all keys are optional unless the <a class="reference internal" href="#required">required</a> rule is set for
a key.</p>
</div>
<div class="section" id="validation-rules">
<h2>Validation Rules<a class="headerlink" href="#validation-rules" title="Permalink to this headline">¶</a></h2>
<p>The following rules are currently supported:</p>
<div class="section" id="type">
<span id="id1"></span><h3>type<a class="headerlink" href="#type" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>Data type allowed for the key value. Can be one of the following:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">string</span></code></li>
<li><code class="docutils literal"><span class="pre">integer</span></code></li>
<li><code class="docutils literal"><span class="pre">float</span></code></li>
<li><code class="docutils literal"><span class="pre">number</span></code> (integer or float)</li>
<li><code class="docutils literal"><span class="pre">boolean</span></code></li>
<li><code class="docutils literal"><span class="pre">datetime</span></code></li>
<li><code class="docutils literal"><span class="pre">dict</span></code> (formally <code class="docutils literal"><span class="pre">collections.mapping</span></code>)</li>
<li><code class="docutils literal"><span class="pre">list</span></code> (formally <code class="docutils literal"><span class="pre">collections.sequence</span></code>, excluding strings)</li>
<li><code class="docutils literal"><span class="pre">set</span></code></li>
</ul>
</dd>
</dl>
<p>A list of types can be used to allow different values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">({</span><span class="s">&#39;quotes&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;list&#39;</span><span class="p">]}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;quotes&#39;</span><span class="p">:</span> <span class="s">&#39;Hello world!&#39;</span><span class="p">})</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;quotes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;Do not disturb my circles!&#39;</span><span class="p">,</span> <span class="s">&#39;Heureka!&#39;</span><span class="p">]})</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">({</span><span class="s">&#39;quotes&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;list&#39;</span><span class="p">],</span> <span class="s">&#39;schema&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">}}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;quotes&#39;</span><span class="p">:</span> <span class="s">&#39;Hello world!&#39;</span><span class="p">})</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;quotes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Heureka!&#39;</span><span class="p">]})</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;quotes&#39;: {0: &#39;must be of string type&#39;}}</span>
</pre></div>
</div>
<p>You can extend this list and support custom types, see <a class="reference internal" href="customize.html#new-types"><span>Custom Data Types</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please note that type validation is performed before any other validation
rule which might exist on the same field (only exception being the
<code class="docutils literal"><span class="pre">nullable</span></code> rule). In the occurrence of a type failure subsequent
validation rules on the field will be skipped and validation will continue
on other fields. This allows to safely assume that field type is correct
when other (standard or custom) rules are invoked.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span>If a list of types is given, the key value must match <em>any</em> of them.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.7.1: </span><code class="docutils literal"><span class="pre">dict</span></code> and <code class="docutils literal"><span class="pre">list</span></code> typechecking are now performed with the more generic
<code class="docutils literal"><span class="pre">Mapping</span></code> and <code class="docutils literal"><span class="pre">Sequence</span></code> types from the builtin <code class="docutils literal"><span class="pre">collections</span></code> module.
This means that instances of custom types designed to the same interface as
the builtin <code class="docutils literal"><span class="pre">dict</span></code> and <code class="docutils literal"><span class="pre">list</span></code> types can be validated with Cerberus. We
exclude strings when type checking for <code class="docutils literal"><span class="pre">list</span></code>/<code class="docutils literal"><span class="pre">Sequence</span></code> because it
in the validation situation it is almost certain the string was not the
intended data type for a sequence.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.7: </span>Added the <code class="docutils literal"><span class="pre">set</span></code> data type.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.6: </span>Added the <code class="docutils literal"><span class="pre">number</span></code> data type.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.4.0: </span>Type validation is always executed first, and blocks other field validation
rules on failure.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.3.0: </span>Added the <code class="docutils literal"><span class="pre">float</span></code> data type.</p>
</div>
</div>
<div class="section" id="required">
<h3>required<a class="headerlink" href="#required" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">True</span></code> the key/value pair is mandatory. Validation will fail when it is
missing, unless <a class="reference internal" href="api.html#cerberus.Validator.validate" title="cerberus.Validator.validate"><code class="xref py py-func docutils literal"><span class="pre">validate()</span></code></a> is called with
<code class="docutils literal"><span class="pre">update=True</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;required&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">},</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;name&#39;: &#39;must be of string type&#39;}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">String fields with empty values will still be validated, even when
<code class="docutils literal"><span class="pre">required</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>. If you don&#8217;t want to accept empty values,
see the <a class="reference internal" href="#empty">empty</a> rule. Also, if <a class="reference internal" href="#dependencies">dependencies</a> are declared for the field, its
<code class="docutils literal"><span class="pre">required</span></code> rule will only be validated if all dependencies are
included with the document.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>Check field dependencies.</p>
</div>
</div>
<div class="section" id="readonly">
<h3>readonly<a class="headerlink" href="#readonly" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">True</span></code> the value is readonly. Validation will fail if this field is present
in the target dictionary.</p>
</div>
<div class="section" id="nullable">
<h3>nullable<a class="headerlink" href="#nullable" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">True</span></code> the field value can be set to <code class="docutils literal"><span class="pre">None</span></code>. It is essentially the
functionality of the <code class="docutils literal"><span class="pre">ignore_none_values</span></code> parameter of the <a class="reference internal" href="api.html#validator"><span>Validator Class</span></a>,
but allowing for more fine grained control down to the field level.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a_nullable_integer&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;nullable&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">},</span> <span class="s">&#39;an_integer&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;a_nullable_integer&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;a_nullable_integer&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">})</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;an_integer&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;an_integer&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">})</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;an_integer&#39;: &#39;must be of integer type&#39;}</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.7: </span><code class="docutils literal"><span class="pre">nullable</span></code> is valid on fields lacking type definition.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.3.0.</span></p>
</div>
</div>
<div class="section" id="minlength-maxlength">
<h3>minlength, maxlength<a class="headerlink" href="#minlength-maxlength" title="Permalink to this headline">¶</a></h3>
<p>Minimum and maximum length allowed for <code class="docutils literal"><span class="pre">string</span></code> and <code class="docutils literal"><span class="pre">list</span></code> types.</p>
</div>
<div class="section" id="min-max">
<h3>min, max<a class="headerlink" href="#min-max" title="Permalink to this headline">¶</a></h3>
<p>Minimum and maximum value allowed for <code class="docutils literal"><span class="pre">integer</span></code>, <code class="docutils literal"><span class="pre">float</span></code> and <code class="docutils literal"><span class="pre">number</span></code>
types.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.7: </span>Added support for <code class="docutils literal"><span class="pre">float</span></code> and <code class="docutils literal"><span class="pre">number</span></code> types.</p>
</div>
</div>
<div class="section" id="allowed">
<h3>allowed<a class="headerlink" href="#allowed" title="Permalink to this headline">¶</a></h3>
<p>Allowed values for <code class="docutils literal"><span class="pre">string</span></code>, <code class="docutils literal"><span class="pre">list</span></code> and <code class="docutils literal"><span class="pre">int</span></code> types. Validation will fail
if target values are not included in the allowed list.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;role&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;list&#39;</span><span class="p">,</span> <span class="s">&#39;allowed&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;agent&#39;</span><span class="p">,</span> <span class="s">&#39;client&#39;</span><span class="p">,</span> <span class="s">&#39;supplier&#39;</span><span class="p">]}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;role&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;agent&#39;</span><span class="p">,</span> <span class="s">&#39;supplier&#39;</span><span class="p">]})</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;role&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;intern&#39;</span><span class="p">]})</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;role&#39;: &quot;unallowed values [&#39;intern&#39;]&quot;}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;role&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;allowed&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;agent&#39;</span><span class="p">,</span> <span class="s">&#39;client&#39;</span><span class="p">,</span> <span class="s">&#39;supplier&#39;</span><span class="p">]}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;role&#39;</span><span class="p">:</span> <span class="s">&#39;supplier&#39;</span><span class="p">})</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;role&#39;</span><span class="p">:</span> <span class="s">&#39;intern&#39;</span><span class="p">})</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;role&#39;: &#39;unallowed value intern&#39;}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a_restricted_integer&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">,</span> <span class="s">&#39;allowed&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;a_restricted_integer&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">})</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;a_restricted_integer&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;a_restricted_unteger&#39;: &#39;unallowed value 2&#39;}</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.5.1: </span>Added support for the <code class="docutils literal"><span class="pre">int</span></code> type.</p>
</div>
</div>
<div class="section" id="empty">
<h3>empty<a class="headerlink" href="#empty" title="Permalink to this headline">¶</a></h3>
<p>Only applies to string fields. If <code class="docutils literal"><span class="pre">False</span></code> validation will fail if the value
is empty. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;empty&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;name&#39;: &#39;empty values not allowed&#39;}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.0.3.</span></p>
</div>
</div>
<div class="section" id="items-dict">
<span id="id2"></span><h3>items (dict)<a class="headerlink" href="#items-dict" title="Permalink to this headline">¶</a></h3>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.0.3: </span>Use <a class="reference internal" href="#schema"><span>schema (dict)</span></a> instead.</p>
</div>
<p>When a dictionary, <code class="docutils literal"><span class="pre">items</span></code> defines the validation schema for items in
a <code class="docutils literal"><span class="pre">list</span></code> type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;rows&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;list&#39;</span><span class="p">,</span> <span class="s">&#39;items&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;sku&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">},</span> <span class="s">&#39;price&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">}}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;rows&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;sku&#39;</span><span class="p">:</span> <span class="s">&#39;KT123&#39;</span><span class="p">,</span> <span class="s">&#39;price&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="#items-dict"><span>items (dict)</span></a> rule is deprecated, and will be removed in a future release.</p>
</div>
</div>
<div class="section" id="items-list">
<h3>items (list)<a class="headerlink" href="#items-list" title="Permalink to this headline">¶</a></h3>
<p>When a list, <code class="docutils literal"><span class="pre">items</span></code> defines a list of values allowed in a <code class="docutils literal"><span class="pre">list</span></code> type of
fixed length in the given order:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;list_of_values&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;list&#39;</span><span class="p">,</span> <span class="s">&#39;items&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">}]}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;list_of_values&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;list_of_values&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="s">&#39;hello&#39;</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#schema"><span>schema (dict)</span></a> rule below for dealing with arbitrary length <code class="docutils literal"><span class="pre">list</span></code> types.</p>
</div>
<div class="section" id="schema-dict">
<span id="schema"></span><h3>schema (dict)<a class="headerlink" href="#schema-dict" title="Permalink to this headline">¶</a></h3>
<p>Validation rules for <code class="docutils literal"><span class="pre">dict</span></code> fields.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a_dict&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;dict&#39;</span><span class="p">,</span> <span class="s">&#39;schema&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;address&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">},</span> <span class="s">&#39;city&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;required&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a_dict&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;address&#39;</span><span class="p">:</span> <span class="s">&#39;my address&#39;</span><span class="p">,</span> <span class="s">&#39;city&#39;</span><span class="p">:</span> <span class="s">&#39;my town&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If all keys should share the same validation rules you probably want to use <a class="reference internal" href="#valueschema"><span>valueschema</span></a> instead.</p>
</div>
</div>
<div class="section" id="schema-list">
<h3>schema (list)<a class="headerlink" href="#schema-list" title="Permalink to this headline">¶</a></h3>
<p>You can also use this rule to validate arbitrary length <code class="docutils literal"><span class="pre">list</span></code> items.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a_list&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;list&#39;</span><span class="p">,</span> <span class="s">&#39;schema&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a_list&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The <cite>schema</cite> rule on <code class="docutils literal"><span class="pre">list</span></code> types is also the prefered method for defining
and validating a list of dictionaries.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;rows&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;list&#39;</span><span class="p">,</span> <span class="s">&#39;schema&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;dict&#39;</span><span class="p">,</span> <span class="s">&#39;schema&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;sku&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">},</span> <span class="s">&#39;price&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">}}}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;rows&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;sku&#39;</span><span class="p">:</span> <span class="s">&#39;KT123&#39;</span><span class="p">,</span> <span class="s">&#39;price&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.0.3: </span>Schema rule for <code class="docutils literal"><span class="pre">list</span></code> types of arbitrary length</p>
</div>
</div>
<div class="section" id="valueschema">
<span id="id3"></span><h3>valueschema<a class="headerlink" href="#valueschema" title="Permalink to this headline">¶</a></h3>
<p>Validation schema for all values of a <code class="docutils literal"><span class="pre">dict</span></code>. The <code class="docutils literal"><span class="pre">dict</span></code> can have arbitrary
keys, the values for all of which must validate with given schema:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;numbers&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;dict&#39;</span><span class="p">,</span> <span class="s">&#39;valueschema&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">10</span><span class="p">}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;numbers&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;an integer&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">&#39;another integer&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;numbers&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;an integer&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;numbers&#39;: {&#39;an integer&#39;: &#39;min value is 10&#39;}}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span>renamed <code class="docutils literal"><span class="pre">keyschema</span></code> to <code class="docutils literal"><span class="pre">valueschema</span></code></p>
</div>
</div>
<div class="section" id="propertyschema">
<h3>propertyschema<a class="headerlink" href="#propertyschema" title="Permalink to this headline">¶</a></h3>
<p>This is the counterpart to <code class="docutils literal"><span class="pre">valueschema</span></code> that validates the <cite>keys</cite> of a <code class="docutils literal"><span class="pre">dict</span></code>. For historical reasons
it is <cite>not</cite> named <code class="docutils literal"><span class="pre">keyschema</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="s">&#39;a_dict&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;dict&#39;</span><span class="p">,</span> <span class="s">&#39;propertyschema&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;regex&#39;</span><span class="p">:</span> <span class="s">&#39;[a-z]+&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a_dict&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;key&#39;</span><span class="p">:</span> <span class="s">&#39;value&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a_dict&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;KEY&#39;</span><span class="p">:</span> <span class="s">&#39;value&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</div>
<div class="section" id="regex">
<h3>regex<a class="headerlink" href="#regex" title="Permalink to this headline">¶</a></h3>
<p>Validation will fail if field value does not match the provided regex rule. Only applies to string fiels.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;email&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;regex&#39;</span><span class="p">:</span> <span class="s">&#39;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;email&#39;</span><span class="p">:</span> <span class="s">&#39;john@example.com&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;email&#39;</span><span class="p">:</span> <span class="s">&#39;john_at_example_dot_com&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;email&#39;: &#39;value does not match regex &quot;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$&quot;}</span>
</pre></div>
</div>
<p>For details on regex rules, see <a class="reference external" href="https://docs.python.org/2/library/re.html#regular-expression-syntax">Regular Expressions Syntax</a> on Python official site.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</div>
<div class="section" id="dependencies">
<h3>dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>This rule allows for either a list or dict of dependencies. When a list is
provided, all listed fields must be present in order for the target field to be
validated.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;field1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;required&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">},</span> <span class="s">&#39;field2&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;required&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">&#39;dependencies&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;field1&#39;</span><span class="p">]}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;field1&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;field2&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;field2&#39;: &#39;field &quot;field1&quot; is required&#39;}</span>
</pre></div>
</div>
<p>When a dictionary is provided, then not only all dependencies must be present,
but also any of their allowed values must be matched.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;field1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;required&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">},</span> <span class="s">&#39;field2&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;required&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&#39;dependencies&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;field1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">]}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;field1&#39;</span><span class="p">:</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;field2&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;field1&#39;</span><span class="p">:</span> <span class="s">&#39;three&#39;</span><span class="p">,</span> <span class="s">&#39;field2&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;field2&#39;: &quot;field &#39;field1&#39; is required with values: [&#39;one&#39;, &#39;two&#39;]&quot;}</span>


<span class="gp">&gt;&gt;&gt; </span><span class="c"># same as using a dependencies list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;field2&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">{&#39;field2&#39;: &quot;field &#39;field1&#39; is required&quot;}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># one can also pass a single dependency value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;field1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;required&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">},</span> <span class="s">&#39;field2&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;dependencies&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;field1&#39;</span><span class="p">:</span> <span class="s">&#39;one&#39;</span><span class="p">}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;field1&#39;</span><span class="p">:</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;field2&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;field1&#39;</span><span class="p">:</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;field2&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;field2&#39;: &quot;field &#39;field1&#39; is required with values: one&quot;}</span>
</pre></div>
</div>
<p>Dependencies on sub-document fields are also supported:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>  <span class="s">&#39;test_field&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;dependencies&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;a_dict.foo&#39;</span><span class="p">,</span> <span class="s">&#39;a_dict.bar&#39;</span><span class="p">]},</span>
<span class="gp">... </span>  <span class="s">&#39;a_dict&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;dict&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s">&#39;schema&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>      <span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">},</span>
<span class="gp">... </span>      <span class="s">&#39;bar&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span>  <span class="p">}</span>
<span class="gp">... </span><span class="p">}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;test_field&#39;</span><span class="p">:</span> <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="s">&#39;a_dict&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;test_field&#39;: &quot;field &#39;a_dict.bar&#39; is required&quot;}</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8.1: </span>Support for sub-document fields as dependencies.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>Support for dependencies as a dictionary.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</div>
<div class="section" id="anyof">
<h3>anyof<a class="headerlink" href="#anyof" title="Permalink to this headline">¶</a></h3>
<p>This rule allows you to list multiple sets of rules to validate against. The field will be considered valid if it validates against one set in the list.
For example, to verify that a property is a number between 0 and 10 or 100 and 110, you could do the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;prop1&#39;</span><span class="p">:</span>
<span class="gp">... </span>          <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;number&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="s">&#39;anyof&#39;</span><span class="p">:</span>
<span class="gp">... </span>           <span class="p">[{</span><span class="s">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;max&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;min&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s">&#39;max&#39;</span><span class="p">:</span> <span class="mi">110</span><span class="p">}]}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;prop1&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;prop1&#39;</span><span class="p">:</span> <span class="mi">105</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;prop1&#39;</span><span class="p">:</span> <span class="mi">55</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;prop1&#39;: {&#39;anyof&#39;: &#39;no definitions validated&#39;, &#39;definition 1&#39;: &#39;min value is 100&#39;, &#39;definition 0&#39;: &#39;max value is 10&#39;}}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
<p>The <cite>anyof</cite> rule works by creating a new instance of a schema for each item in the list. The above schema is equivalent to creating two separate schemas,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema1</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;prop1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;number&#39;</span><span class="p">,</span> <span class="s">&#39;min&#39;</span><span class="p">:</span>   <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;max&#39;</span><span class="p">:</span>  <span class="mi">10</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema2</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;prop1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;number&#39;</span><span class="p">,</span> <span class="s">&#39;min&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s">&#39;max&#39;</span><span class="p">:</span> <span class="mi">110</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;prop1&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema1</span><span class="p">)</span> <span class="ow">or</span> <span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;prop1&#39;</span><span class="p">:</span> <span class="mi">105</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema1</span><span class="p">)</span> <span class="ow">or</span> <span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid</span>
<span class="go">True</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;prop1&#39;</span><span class="p">:</span> <span class="mi">55</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema1</span><span class="p">)</span> <span class="ow">or</span> <span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<div class="section" id="allof">
<h3>allof<a class="headerlink" href="#allof" title="Permalink to this headline">¶</a></h3>
<p>Same as <code class="docutils literal"><span class="pre">anyof</span></code>, except that all rule collections in the list must validate.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</div>
<div class="section" id="noneof">
<h3>noneof<a class="headerlink" href="#noneof" title="Permalink to this headline">¶</a></h3>
<p>Same as <code class="docutils literal"><span class="pre">anyof</span></code>, except that it requires no rule collections in the list to validate.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</div>
<div class="section" id="oneof">
<h3>oneof<a class="headerlink" href="#oneof" title="Permalink to this headline">¶</a></h3>
<p>Same as <code class="docutils literal"><span class="pre">anyof</span></code>, except that only one rule collections in the list can validate.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</div>
</div>
<div class="section" id="allowing-the-unknown">
<h2>Allowing the Unknown<a class="headerlink" href="#allowing-the-unknown" title="Permalink to this headline">¶</a></h2>
<p>By default only keys defined in the schema are allowed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;maxlength&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;sex&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">})</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;sex&#39;: &#39;unknown field&#39;}</span>
</pre></div>
</div>
<p>However, you can allow unknown key/value pairs by either setting
<code class="docutils literal"><span class="pre">allow_unknown</span></code> to <code class="docutils literal"><span class="pre">True</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="o">=</span><span class="p">{})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">allow_unknown</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;sex&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">})</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Or you can set <code class="docutils literal"><span class="pre">allow_unknown</span></code> to a validation schema, in which case
unknown fields will be validated against it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="o">=</span><span class="p">{})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">allow_unknown</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;an_unknown_field&#39;</span><span class="p">:</span> <span class="s">&#39;john&#39;</span><span class="p">})</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;an_unknown_field&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;an_unknown_field&#39;: &#39;must be of string type&#39;}</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">allow_unknown</span></code> can also be set at initialization:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span> <span class="n">allow_unknown</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;sex&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">})</span>
<span class="go">True</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">allow_unknown</span></code> can also be set for nested dictionaries</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># by default allow_unknown is False for the whole document.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">allow_unknown</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># we can switch it on (or set it to a validation schema) for individual subdocuments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">},</span>
<span class="gp">... </span>  <span class="s">&#39;a_dict&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;dict&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s">&#39;allow_unknown&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s">&#39;schema&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>      <span class="s">&#39;address&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span>  <span class="p">}</span>
<span class="gp">... </span><span class="p">}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;a_dict&#39;</span><span class="p">:{</span><span class="s">&#39;an_unknown_field&#39;</span><span class="p">:</span> <span class="s">&#39;is allowed&#39;</span><span class="p">}},</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># this fails as allow_unknown is still False for the parent document.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;an_unknown_field&#39;</span><span class="p">:</span> <span class="s">&#39;is not allowed&#39;</span><span class="p">,</span> <span class="s">&#39;a_dict&#39;</span><span class="p">:{</span><span class="s">&#39;an_unknown_field&#39;</span><span class="p">:</span> <span class="s">&#39;is allowed&#39;</span><span class="p">}},</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;an_unknown_field&#39;: &#39;unknown field&#39;}</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span><code class="docutils literal"><span class="pre">allow_unknown</span></code> can also be set for nested dict fields.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span><code class="docutils literal"><span class="pre">allow_unknown</span></code> can also be set to a validation schema.</p>
</div>
</div>
<div class="section" id="type-coercion">
<span id="id4"></span><h2>Type Coercion<a class="headerlink" href="#type-coercion" title="Permalink to this headline">¶</a></h2>
<p>Type coercion allows you to apply a callable to a value before any other
validators run.  The return value of the callable replaces the new value in
the document.  This can be used to convert values or sanitize data before it is
validated.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">({</span><span class="s">&#39;amount&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;amount&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">})</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">({</span><span class="s">&#39;amount&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">,</span> <span class="s">&#39;coerce&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;amount&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">})</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">document</span>
<span class="go">{&#39;amount&#39;: 1}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">to_bool</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;true&#39;</span><span class="p">,</span> <span class="s">&#39;1&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">({</span><span class="s">&#39;flag&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;boolean&#39;</span><span class="p">,</span> <span class="s">&#39;coerce&#39;</span><span class="p">:</span> <span class="n">to_bool</span><span class="p">}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">({</span><span class="s">&#39;flag&#39;</span><span class="p">:</span> <span class="s">&#39;true&#39;</span><span class="p">})</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">document</span>
<span class="go">{&#39;flag&#39;: True}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</div>
<div class="section" id="validated-method">
<h2><cite>validated</cite> Method<a class="headerlink" href="#validated-method" title="Permalink to this headline">¶</a></h2>
<p>There&#8217;s a wrapper-method <code class="docutils literal"><span class="pre">validated</span></code> that returns the validated document. It
can be useful for flows like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid_documents</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">validated</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">documents</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">]</span>
</pre></div>
</div>
<p>If a coercion callable raises a <code class="docutils literal"><span class="pre">TypeError</span></code> or <code class="docutils literal"><span class="pre">ValueError</span></code> then the
exception will be caught and the validation with fail.  All other exception
pass through.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</div>
<div class="section" id="normalized-method">
<h2><cite>normalized</cite> Method<a class="headerlink" href="#normalized-method" title="Permalink to this headline">¶</a></h2>
<p>Similary, the <code class="docutils literal"><span class="pre">normalized</span></code>-method returns a normalized copy of a document without validating it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">norm_doc</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">normalized</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version FIXME.</span></p>
</div>
</div>
<div class="section" id="vanilla-python">
<h2>Vanilla Python<a class="headerlink" href="#vanilla-python" title="Permalink to this headline">¶</a></h2>
<p>Cerberus schemas are built with vanilla Python types: <cite>dict</cite>, <cite>list</cite>, <cite>string</cite>, etc. Even user-defined validation rules are invoked in the schema by name, as a string.
A useful side effect of this design is that schemas can be defined in a number of ways, for example with YAML.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">yaml</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema_text</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span>
<span class="go">...name:</span>
<span class="gp">... </span> <span class="nb">type</span><span class="p">:</span> <span class="n">string</span>
<span class="go">...age&#39;:</span>
<span class="gp">... </span> <span class="nb">type</span><span class="p">:</span> <span class="n">integer</span>
<span class="gp">... </span> <span class="nb">min</span><span class="p">:</span> <span class="mi">10</span>
<span class="go">...&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">schema_text</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="mi">1337</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;age&#39;: &#39;min value is 10&#39;, &#39;name&#39;: &#39;must be of string type&#39;}</span>
</pre></div>
</div>
<p>You don&#8217;t have to use YAML of course, you can use your favorate serializer. JSON for example. As long as there is a decoder thant can produce a nested <cite>dict</cite>, you
can use it to define a schema.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/cerberus.png" alt="Logo"/>
    
    <h1 class="logo logo-name">Cerberus</h2>
    
  </a>
</p>



<p class="blurb">Python data validation library</p>



<p>
<iframe src="https://ghbtns.com/github-btn.html?user=nicolaiarocci&repo=cerberus&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>


<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#validation-schema">Validation Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="#validation-rules">Validation Rules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#type">type</a></li>
<li class="toctree-l3"><a class="reference internal" href="#required">required</a></li>
<li class="toctree-l3"><a class="reference internal" href="#readonly">readonly</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nullable">nullable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minlength-maxlength">minlength, maxlength</a></li>
<li class="toctree-l3"><a class="reference internal" href="#min-max">min, max</a></li>
<li class="toctree-l3"><a class="reference internal" href="#allowed">allowed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#empty">empty</a></li>
<li class="toctree-l3"><a class="reference internal" href="#items-dict">items (dict)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#items-list">items (list)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schema-dict">schema (dict)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schema-list">schema (list)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#valueschema">valueschema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#propertyschema">propertyschema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#regex">regex</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#anyof">anyof</a></li>
<li class="toctree-l3"><a class="reference internal" href="#allof">allof</a></li>
<li class="toctree-l3"><a class="reference internal" href="#noneof">noneof</a></li>
<li class="toctree-l3"><a class="reference internal" href="#oneof">oneof</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#allowing-the-unknown">Allowing the Unknown</a></li>
<li class="toctree-l2"><a class="reference internal" href="#type-coercion">Type Coercion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#validated-method"><cite>validated</cite> Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#normalized-method"><cite>normalized</cite> Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vanilla-python">Vanilla Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="customize.html">Extending</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="install.html" title="previous chapter">Cerberus Installation</a></li>
      <li>Next: <a href="customize.html" title="next chapter">Extending Cerberus</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2012-2015, Nicola Iarocci.
      
      |
      <a href="_sources/usage.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>